<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>URL Encoder/Decoder - Multi-Tools Hub</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="../assets/css/style.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- CodeMirror -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/monokai.min.css">
</head>
<body>
    <!-- Header will be dynamically loaded here -->
    <div id="header-container"></div>

    <main class="container my-4">
        <div class="row">
            <div class="col-lg-8 mx-auto">
                <div class="card">
                    <div class="card-body">
                        <h1 class="card-title text-center mb-4">URL Encoder/Decoder</h1>
                        
                        <!-- Tool Description -->
                        <p class="text-muted text-center mb-4">
                            Encode and decode URLs with various options and features.
                        </p>

                        <!-- Mode Selection -->
                        <div class="card mb-4">
                            <div class="card-header">
                                <h5 class="mb-0">Mode Selection</h5>
                            </div>
                            <div class="card-body">
                                <div class="btn-group w-100" role="group">
                                    <input type="radio" class="btn-check" name="mode" id="encode" checked>
                                    <label class="btn btn-outline-primary" for="encode">Encode</label>
                                    
                                    <input type="radio" class="btn-check" name="mode" id="decode">
                                    <label class="btn btn-outline-primary" for="decode">Decode</label>
                                </div>
                            </div>
                        </div>

                        <!-- Input/Output Area -->
                        <div class="card mb-4">
                            <div class="card-header">
                                <h5 class="mb-0">Input/Output</h5>
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <label for="inputText" class="form-label">Input</label>
                                    <textarea class="form-control" id="inputText" rows="4" placeholder="Enter text to encode/decode"></textarea>
                                </div>
                                <div class="mb-3">
                                    <label for="outputText" class="form-label">Output</label>
                                    <textarea class="form-control" id="outputText" rows="4" readonly></textarea>
                                </div>
                                <div class="d-flex justify-content-between">
                                    <button class="btn btn-outline-secondary" id="clearInput">
                                        <i class="fas fa-eraser"></i> Clear Input
                                    </button>
                                    <button class="btn btn-primary" id="process">
                                        <i class="fas fa-sync"></i> Process
                                    </button>
                                    <button class="btn btn-outline-primary" id="copyOutput">
                                        <i class="fas fa-copy"></i> Copy Output
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Options -->
                        <div class="card mb-4">
                            <div class="card-header">
                                <h5 class="mb-0">Options</h5>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-check mb-3">
                                            <input class="form-check-input" type="checkbox" id="encodeAll" checked>
                                            <label class="form-check-label" for="encodeAll">
                                                Encode all special characters
                                            </label>
                                        </div>
                                        <div class="form-check mb-3">
                                            <input class="form-check-input" type="checkbox" id="encodeSpaces">
                                            <label class="form-check-label" for="encodeSpaces">
                                                Encode spaces as %20
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-check mb-3">
                                            <input class="form-check-input" type="checkbox" id="preserveNewlines">
                                            <label class="form-check-label" for="preserveNewlines">
                                                Preserve newlines
                                            </label>
                                        </div>
                                        <div class="form-check mb-3">
                                            <input class="form-check-input" type="checkbox" id="decodePlus">
                                            <label class="form-check-label" for="decodePlus">
                                                Decode '+' as space
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- URL Analysis -->
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">URL Analysis</h5>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-striped">
                                        <tbody>
                                            <tr>
                                                <th>Protocol</th>
                                                <td id="protocol">-</td>
                                            </tr>
                                            <tr>
                                                <th>Host</th>
                                                <td id="host">-</td>
                                            </tr>
                                            <tr>
                                                <th>Path</th>
                                                <td id="path">-</td>
                                            </tr>
                                            <tr>
                                                <th>Query Parameters</th>
                                                <td id="query">-</td>
                                            </tr>
                                            <tr>
                                                <th>Fragment</th>
                                                <td id="fragment">-</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Ad Space -->
                <div class="ad-space mt-4">
                    Ad Space
                </div>
            </div>
        </div>
    </main>

    <!-- Footer will be dynamically loaded here -->
    <div id="footer-container"></div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- CodeMirror JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/javascript/javascript.min.js"></script>
    <!-- Custom JS -->
    <script src="../assets/js/main.js"></script>
    <script>
        // Load components
        document.addEventListener('DOMContentLoaded', function() {
            loadComponents();
            initializeURLEncoder();
        });

        function initializeURLEncoder() {
            // DOM Elements
            const inputText = document.getElementById('inputText');
            const outputText = document.getElementById('outputText');
            const clearInput = document.getElementById('clearInput');
            const process = document.getElementById('process');
            const copyOutput = document.getElementById('copyOutput');
            const encodeRadio = document.getElementById('encode');
            const decodeRadio = document.getElementById('decode');
            const encodeAll = document.getElementById('encodeAll');
            const encodeSpaces = document.getElementById('encodeSpaces');
            const preserveNewlines = document.getElementById('preserveNewlines');
            const decodePlus = document.getElementById('decodePlus');

            // URL Analysis Elements
            const protocol = document.getElementById('protocol');
            const host = document.getElementById('host');
            const path = document.getElementById('path');
            const query = document.getElementById('query');
            const fragment = document.getElementById('fragment');

            // Initialize CodeMirror
            const inputEditor = CodeMirror.fromTextArea(inputText, {
                mode: 'javascript',
                theme: 'monokai',
                lineNumbers: true,
                lineWrapping: true,
                autoCloseTags: true,
                autoCloseBrackets: true,
                matchBrackets: true,
                indentUnit: 4
            });

            const outputEditor = CodeMirror.fromTextArea(outputText, {
                mode: 'javascript',
                theme: 'monokai',
                lineNumbers: true,
                lineWrapping: true,
                readOnly: true
            });

            // Process URL
            function processURL() {
                const text = inputEditor.getValue();
                let result = '';

                if (encodeRadio.checked) {
                    result = encodeURIComponent(text);
                    if (!encodeAll.checked) {
                        result = result.replace(/%[0-9A-F]{2}/g, function(match) {
                            const char = decodeURIComponent(match);
                            if (/[a-zA-Z0-9\-_.~]/.test(char)) {
                                return char;
                            }
                            return match;
                        });
                    }
                    if (encodeSpaces.checked) {
                        result = result.replace(/\+/g, '%20');
                    }
                } else {
                    try {
                        result = decodeURIComponent(text);
                        if (decodePlus.checked) {
                            result = result.replace(/\+/g, ' ');
                        }
                    } catch (e) {
                        result = 'Error: Invalid URL encoding';
                    }
                }

                if (preserveNewlines.checked) {
                    result = result.replace(/%0A/g, '\n');
                }

                outputEditor.setValue(result);
                analyzeURL(result);
            }

            // Analyze URL
            function analyzeURL(url) {
                try {
                    const urlObj = new URL(url);
                    protocol.textContent = urlObj.protocol;
                    host.textContent = urlObj.host;
                    path.textContent = urlObj.pathname;
                    query.textContent = urlObj.search || '-';
                    fragment.textContent = urlObj.hash || '-';
                } catch (e) {
                    protocol.textContent = '-';
                    host.textContent = '-';
                    path.textContent = '-';
                    query.textContent = '-';
                    fragment.textContent = '-';
                }
            }

            // Event Listeners
            process.addEventListener('click', processURL);
            clearInput.addEventListener('click', () => {
                inputEditor.setValue('');
                outputEditor.setValue('');
                analyzeURL('');
            });
            copyOutput.addEventListener('click', () => {
                const output = outputEditor.getValue();
                navigator.clipboard.writeText(output).then(() => {
                    const originalText = copyOutput.innerHTML;
                    copyOutput.innerHTML = '<i class="fas fa-check"></i> Copied!';
                    setTimeout(() => {
                        copyOutput.innerHTML = originalText;
                    }, 2000);
                });
            });

            // Auto-process on input change
            inputEditor.on('change', () => {
                if (inputEditor.getValue().trim()) {
                    processURL();
                }
            });

            // Update options based on mode
            encodeRadio.addEventListener('change', () => {
                encodeAll.disabled = false;
                encodeSpaces.disabled = false;
                decodePlus.disabled = true;
            });

            decodeRadio.addEventListener('change', () => {
                encodeAll.disabled = true;
                encodeSpaces.disabled = true;
                decodePlus.disabled = false;
            });
        }
    </script>
    <style>
        .CodeMirror {
            height: 150px;
            border: 1px solid #dee2e6;
            border-radius: 0.25rem;
        }
        .CodeMirror-focused {
            border-color: #86b7fe;
            box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
        }
        .table th {
            background-color: #f8f9fa;
        }
    </style>
</body>
</html> 